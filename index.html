
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PodologíAPP - Historia Clínica Podológica</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="styles.css">
    
</head>
<body>
    <div class="container">
        <header class="main-header">
            <div class="main-header-content">
                <h1>
                    <svg class="title-svg-icon" id="Capa_1" enable-background="new 0 0 512.009 512.009" viewBox="0 0 512.009 512.009" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
                        <g><path d="m101.361 326.284h14.999v14.999h-14.999z" transform="matrix(.994 -.11 .11 .994 -36.086 14.014)"/><path d="m143.505 414.879v-15c-13.589 0-21.307-13.803-22.728-26.628l-1.986-17.93-14.908 1.651 1.986 17.93c2.133 19.254 14.82 39.977 37.636 39.977z"/><path d="m174.816 137.464v15h14.999v15h15v-15h-14.999v-15z"/><path d="m429.724 268.019c1.563-14.106-9.781-27.978-32.807-40.114l-6.994 13.27c16.378 8.632 25.684 18.05 24.893 25.192l-2.725 24.579 14.908 1.652z"/><path d="m409.569 306.635h14.999v14.999h-14.999z" transform="matrix(.11 -.994 .994 .11 58.926 694.083)"/><path d="m351.816 458.464h15v15h-15z"/><path d="m336.816 443.464h15v15h-15z"/><path d="m370.319 497.009c-15.541 0-30.981-6.896-41.304-18.449-8.583-9.607-12.576-21.401-11.244-33.21 11.223-99.407-.323-127.707-11.489-155.074-5.073-12.432-9.864-24.175-12.403-42.915l-14.863 2.014c2.794 20.629 8.175 33.815 13.378 46.568 10.455 25.625 21.267 52.122 10.474 147.725-1.818 16.11 3.495 32.051 14.964 44.887 13.122 14.687 32.743 23.455 52.488 23.455 15.097 0 29.174-5.124 40.71-14.817l-9.65-11.483c-8.8 7.391-19.54 11.299-31.061 11.299z"/><path d="m421.109 203.914c-18.124-12.655-41.562-22.577-64.304-27.22-24.166-4.933-45.309-3.612-59.532 3.724-13.104 6.758-20.1 18.194-20.233 33.073-.063 7.167.101 14.033.489 20.406l14.973-.913c-.368-6.026-.523-12.539-.462-19.358.082-9.215 4.043-15.717 12.108-19.876 23.348-12.042 73.99-1.544 108.373 22.463 13.326 9.305 35.22 28.609 32.124 53.353l-21.769 174.014c-1.521 12.165-5.849 23.396-12.515 32.479l12.094 8.875c8.175-11.14 13.468-24.796 15.305-39.491l21.77-174.014c3.017-24.131-10.627-48.108-38.421-67.515z"/><path d="m216.551 113.288c-14.224-7.335-35.365-8.657-59.532-3.724-22.742 4.644-46.18 14.565-64.304 27.22-27.794 19.407-41.438 43.384-38.42 67.513l2.777 22.205 14.885-1.861-2.777-22.205c-3.096-24.743 18.797-44.047 32.123-53.353 34.383-24.008 85.024-34.506 108.373-22.463 8.065 4.16 12.026 10.661 12.108 19.876.367 40.88-6.728 58.262-14.238 76.666-11.168 27.362-22.715 55.656-11.493 155.06 1.611 14.271-4.519 25.11-9.944 31.689l11.572 9.544c10.279-12.465 14.994-27.706 13.276-42.916-10.792-95.598.021-122.09 10.477-147.708 7.74-18.965 15.744-38.576 15.351-82.469-.134-14.88-7.13-26.316-20.234-33.074z"/><path d="m143.505 429.879c-31.518 0-49.338-27.697-52.558-53.431l-17.128-136.923-14.884 1.861 17.129 136.924c4.903 39.194 32.637 66.568 67.441 66.568 14.845 0 29.735-4.933 41.93-13.89l-8.879-12.089c-9.64 7.081-21.377 10.98-33.051 10.98z"/><path d="m433.533 188.909c1.376.254 2.749.377 4.112.377 12.736 0 24.493-10.749 27.269-25.772 3.071-16.631-6.007-32.3-20.238-34.928-7.09-1.309-14.564.856-20.508 5.944-5.577 4.773-9.438 11.682-10.872 19.45-1.436 7.77-.297 15.601 3.207 22.052 3.733 6.874 9.94 11.568 17.03 12.877zm-5.488-32.205c.802-4.339 2.943-8.269 5.876-10.779 1.263-1.081 3.663-2.72 6.602-2.72.464 0 .94.041 1.428.131 5.994 1.107 9.756 9.1 8.213 17.453-1.543 8.354-7.911 14.476-13.906 13.37-3.581-.662-5.655-3.596-6.573-5.286-1.845-3.393-2.441-7.828-1.64-12.169z"/><path d="m377.006 163.827c.13 0 .261-.001.392-.004 14.695-.269 26.002-15.56 25.739-34.812-.148-10.889-4.017-20.799-10.612-27.188-4.556-4.413-9.991-6.737-15.741-6.737-.131 0-.262.001-.392.004-14.696.269-26.003 15.56-25.74 34.812.148 10.889 4.017 20.799 10.612 27.188 4.556 4.413 9.991 6.737 15.742 6.737zm-.34-53.738c.034 0 .067-.001.102-.001 2.252 0 4.133 1.36 5.32 2.511 3.641 3.526 5.959 9.893 6.051 16.617.155 11.435-5.681 19.513-11.016 19.61-.035 0-.068.001-.103.001-2.252 0-4.133-1.36-5.32-2.511-3.641-3.526-5.959-9.894-6.051-16.618-.154-11.434 5.681-19.512 11.017-19.609z"/><path d="m303.26 150.549c2.029 0 4.075-.205 6.116-.629 19.096-3.964 30.806-25.615 26.104-48.264-4.703-22.648-24.068-37.846-43.159-33.883-19.096 3.964-30.806 25.615-26.104 48.264 4.2 20.227 20.09 34.512 37.043 34.512zm-7.889-68.089c10.992-2.283 22.402 7.696 25.423 22.246s-3.469 28.245-14.466 30.528c-11.001 2.283-22.402-7.697-25.423-22.246-3.021-14.55 3.468-28.245 14.466-30.528z"/><path d="m492.824 187.485c-11.738-4.851-25.864 2.27-31.491 15.878-2.614 6.322-3.055 13.171-1.242 19.285 1.954 6.589 6.447 11.763 12.329 14.194 2.501 1.034 5.109 1.524 7.721 1.524 9.65 0 19.343-6.693 23.771-17.402 5.623-13.608.65-28.627-11.088-33.479zm-2.776 27.749c-2.424 5.864-7.874 9.413-11.898 7.746-2.297-.949-3.29-3.287-3.679-4.596-.827-2.791-.563-6.178.723-9.29 2.019-4.882 6.134-8.158 9.778-8.158.733 0 1.447.132 2.121.411 4.026 1.664 5.378 8.023 2.955 13.887z"/><path d="m221.503.644c-9.551-1.983-19.358.65-27.621 7.413-7.802 6.385-13.319 15.785-15.538 26.471-4.701 22.648 7.009 44.299 26.104 48.263 2.074.431 4.161.644 6.242.644 7.496 0 14.911-2.763 21.379-8.057 7.801-6.385 13.318-15.786 15.537-26.471 2.218-10.686.898-21.506-3.717-30.468-4.887-9.494-12.837-15.813-22.386-17.795zm11.416 45.214c-1.522 7.334-5.198 13.695-10.351 17.912-4.689 3.838-10.041 5.38-15.071 4.334-10.997-2.283-17.486-15.978-14.466-30.528 1.522-7.334 5.198-13.695 10.351-17.912 3.731-3.054 7.883-4.653 11.957-4.653 1.046 0 2.088.105 3.115.319 5.028 1.044 9.326 4.586 12.101 9.975 3.047 5.92 3.888 13.219 2.364 20.553z"/><path d="m59.785 115.836c4.807 4.114 10.613 6.317 16.409 6.317 1.371 0 2.741-.123 4.097-.374 7.091-1.309 13.298-6.002 17.032-12.877 3.503-6.451 4.642-14.282 3.207-22.051-1.435-7.77-5.296-14.678-10.873-19.451-5.942-5.087-13.417-7.254-20.506-5.944-7.09 1.309-13.298 6.002-17.031 12.876-3.504 6.451-4.644 14.282-3.208 22.052 1.434 7.77 5.295 14.678 10.873 19.452zm5.515-34.343c.918-1.69 2.993-4.625 6.574-5.286.488-.09.965-.131 1.428-.131 2.938 0 5.339 1.639 6.601 2.72 2.934 2.511 5.075 6.44 5.877 10.78s.204 8.774-1.639 12.167c-.918 1.69-2.992 4.624-6.574 5.286-3.582.657-6.566-1.338-8.028-2.589-2.934-2.511-5.075-6.44-5.877-10.78-.802-4.339-.205-8.774 1.638-12.167z"/><path d="m19.185 120.154c-11.738 4.854-16.711 19.872-11.086 33.479 2.613 6.322 7.137 11.483 12.737 14.533 3.502 1.907 7.271 2.872 10.97 2.872 2.676 0 5.313-.506 7.783-1.527 5.882-2.431 10.375-7.605 12.329-14.194 1.813-6.114 1.372-12.963-1.242-19.285-5.626-13.608-19.753-20.731-31.491-15.878zm18.353 30.899c-.389 1.309-1.382 3.646-3.679 4.596-2.292.951-4.65-.003-5.85-.657-2.557-1.392-4.762-3.976-6.049-7.089-2.423-5.863-1.07-12.222 2.955-13.887 4.021-1.665 9.475 1.883 11.899 7.747 1.287 3.113 1.551 6.499.724 9.29z"/><path d="m136.426 96.694c.132.002.262.004.393.004 5.751 0 11.187-2.324 15.741-6.736 6.597-6.389 10.465-16.298 10.613-27.188.263-19.251-11.044-34.542-25.739-34.812-5.942-.111-11.476 2.221-16.133 6.733-6.597 6.389-10.465 16.298-10.613 27.188-.263 19.25 11.043 34.541 25.738 34.811zm-4.689-51.226c1.188-1.15 3.068-2.511 5.32-2.511.034 0 .067 0 .102.001 5.336.098 11.172 8.176 11.017 19.611-.092 6.724-2.41 13.091-6.051 16.617-1.205 1.167-3.11 2.519-5.423 2.51-5.335-.098-11.171-8.175-11.016-19.61.092-6.724 2.41-13.091 6.051-16.618z"/></g></svg>
                    PodologíAPP
                </h1>
                <p>Historia Clínica Podológica</p>
            </div>
            <div class="header-logo-area">
                <div class="clinic-logo-preview" id="clinicLogoPreview">
                    <div class="placeholder-content" id="clinicLogoPlaceholderContent">
                        <svg class="placeholder-icon" viewBox="0 0 24 24" fill="currentColor" style="width:50px; height:50px; fill:var(--medium-grey);">
                            <path d="M19 5H5c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 12H5V7h14v10zm-4.5-4L11 9.5 6.5 14H18l-3.5-4.5z"/>
                        </svg>
                        <span>Tu logotipo aquí</span>
                    </div>
                    <img id="clinicLogoImg" src="" alt="Logo Clínica">
                </div>
                <input type="file" id="clinicLogoInput" accept="image/*">
            </div>
        </header>

        <form id="podiatryForm">
            <section>
                <h2>
                    <svg id="specialist-info-icon" xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 63 63" viewBox="0 0 63 63" style="fill:var(--primary-dark);">
                        <g>
                            <path d="m57.1 44.4c-.3-2-1.7-6.6-7.6-8.5 0 0-4.6-1.4-8.1-1.8-1.5-.2-2.8-1.4-3-2.9 3.9-4 6.5-10.8 6.9-15.7h.2v-11.8l-14-3.2-14 3.2v11.8h.2c.4 4.8 2.9 11.4 6.7 15.5-.2 1.6-1.4 2.9-3 3.1-3 .4-7.9 1.8-7.9 1.8-4 1.2-6.8 4.5-7.6 8.6-1.3 7.4 1.2 14.5 1.2 14.5s10.3 3.5 24.4 3.5c14 0 24.4-3.5 24.4-3.5s2.5-7.1 1.2-14.6zm-34.5-19.6c3 .5 6 .7 9 .7 2.9 0 5.9-.2 8.8-.7-2.2 4.2-5.4 7.7-8.9 7.7s-6.7-3.5-8.9-7.7zm-3.1-19.5 12-2.8 12 2.8v8.2h-24zm23.8 10.2c-.2 2.2-.8 4.7-1.8 7.1-6.6 1.2-13.3 1.2-19.8 0-1-2.4-1.6-4.9-1.8-7.1zm-17.2 17c1.6 1.2 3.4 2 5.4 2 1.9 0 3.6-.7 5.2-1.9.6 1.4 1.7 2.6 3.2 3.1l-2.8 2.8h-11.2l-2.9-2.8c1.5-.6 2.6-1.8 3.1-3.2zm28.6 23.3-.4 1.6c-14.8 4.2-30.8 4.2-45.6 0 0 0-2.1-6.1-.8-12.6.6-3.3 2.9-6 6.2-6.9 0 0 4.6-1.2 6.7-1.6l4.3 4.3h12.9l4.3-4.3c2.2.3 6.7 1.6 6.7 1.6 4.9 1.7 5.9 5.3 6.2 6.9.5 3.7.4 7.4-.5 11z"/>
                            <path d="m32.5 5.5h-2v2h-2v2h2v2h2v-2h2v-2h-2z"/>
                            <path d="m46.5 45.5h-2v2h-2v2h2v2h2v-2h-2z"/>
                        </g>
                    </svg>
                    Información del Especialista
                </h2>
                <div class="grid-container">
                    <div class="form-group">
                        <label for="specialistName">Nombre del Especialista:</label>
                        <input type="text" id="specialistName" name="specialistName" required>
                    </div>
                    <div class="form-group">
                        <label for="specialty">Especialidad:</label>
                        <select id="specialty" name="specialty" onchange="toggleOtherSelectInput(this, 'otherSpecialty')" required>
                            <option value="">Seleccione</option>
                            <option value="Podólogo" selected>Podólogo</option>
                            <option value="Médico General">Médico General</option>
                            <option value="Enfermero">Enfermero</option>
                            <option value="Cirujano Vascular">Cirujano Vascular</option>
                            <option value="Endocrinólogo">Endocrinólogo</option>
                            <option value="Nutriólogo">Nutriólogo</option>
                            <option value="Otro">Otro</option>
                        </select>
                        <input type="text" id="otherSpecialty" name="otherSpecialty" class="other-input" placeholder="Especificar otra especialidad">
                    </div>
                    <div class="form-group">
                        <label for="clinicName">Clínica / Centro de Salud:</label>
                        <input type="text" id="clinicName" name="clinicName" required>
                    </div>
                    <div class="form-group">
                        <label for="clinicPhone">Teléfono de Contacto:</label>
                        <input type="tel" id="clinicPhone" name="clinicPhone">
                    </div>
                    <div class="form-group">
                        <label for="clinicEmail">Correo de Contacto:</label>
                        <input type="email" id="clinicEmail" name="clinicEmail">
                    </div>
                    <div class="form-group">
                        <label for="assessmentDate">Fecha de Valoración:</label>
                        <input type="date" id="assessmentDate" name="assessmentDate" required>
                    </div>
                </div>
            </section>

            <section>
                <h2>
                    <svg id="patient-data-icon" xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 512 512" viewBox="0 0 512 512" style="fill:var(--primary-dark);">
                        <g>
                            <path d="m196 180h30v30h-30z"/>
                            <path d="m286 180h30v30h-30z"/>
                            <path d="m466 465c0-74.439-60.561-135-134.999-135h-15.001v-16.109c35.84-20.779 60-59.565 60-103.891 0-10.889 0-79.039 0-90 0-66.168-53.832-120-120-120s-120 53.832-120 120v90c0 44.326 24.16 83.112 60 103.891v16.109h-15c-74.439 0-135 60.561-135 135v47h420zm-300-345c0-49.626 40.374-90 90-90 44.173 0 81.015 31.989 88.578 74.018-12.293-8.81-27.334-14.018-43.578-14.018-20.033 0-38.867 7.801-53.032 21.967-17.351 17.35-45.607 38.033-81.685 38.033h-.283zm0 90v-30h.283c36.686 0 72.268-16.19 102.897-46.82 8.499-8.5 19.8-13.18 31.819-13.18 24.813 0 45 20.187 45 45v45c0 49.626-40.374 90-90 90s-89.999-40.374-89.999-90zm90 120c10.355 0 20.408-1.319 30-3.797v12.584l-30 30-30-30v-12.584c9.592 2.478 19.645 3.797 30 3.797zm-180 135c0-57.897 47.103-105 105-105h23.787l36.213 36.213v85.787h-165zm360 17h-165v-85.787l36.213-36.213h23.788c57.896 0 104.999 47.103 104.999 105z"/>
                        </g>
                    </svg>
                    Datos del Paciente
                </h2>
                <div class="grid-container">
                    <div class="form-group">
                        <label for="patientName">Nombre Completo:</label>
                        <input type="text" id="patientName" name="patientName" required>
                    </div>
                    <div class="form-group">
                        <label for="patientAge">Edad:</label>
                        <input type="number" id="patientAge" name="patientAge" min="0" required>
                    </div>
                    <div class="form-group">
                        <label>Sexo:</label>
                        <div class="radio-group">
                            <label>
                                <input type="radio" name="patientSex" value="Masculino" required>
                                <span class="radiomark"></span> Masculino
                            </label>
                            <label>
                                <input type="radio" name="patientSex" value="Femenino">
                                <span class="radiomark"></span> Femenino
                            </label>
                            <label>
                                <input type="radio" name="patientSex" value="Otro" onchange="toggleOtherRadioInput(this, 'otherPatientSex')">
                                <span class="radiomark"></span> Otro
                            </label>
                        </div>
                        <input type="text" id="otherPatientSex" name="otherPatientSex" class="other-input" placeholder="Especificar otro sexo">
                    </div>
                    <div class="form-group">
                        <label for="patientPhone">Teléfono:</label>
                        <input type="tel" id="patientPhone" name="patientPhone">
                    </div>
                    <div class="form-group">
                        <label for="patientAddress">Domicilio:</label>
                        <input type="text" id="patientAddress" name="patientAddress">
                    </div>
                    <div class="form-group">
                        <label for="patientOccupation">Ocupación:</label>
                        <input type="text" id="patientOccupation" name="patientOccupation">
                    </div>
                </div>
            </section>

            <section>
                <h2>
                    <svg id="pathological-history-icon" xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 512 512" viewBox="0 0 512 512" style="fill:var(--primary-dark);">
                        <g>
                            <path d="m461.699 90.47h-29.16v-8.96c0-11.844-9.631-21.48-21.47-21.48h-10.14v-7.551c0-6.188-5.021-11.222-11.202-11.249v-13.117c0-15.502-12.612-28.113-28.114-28.113s-28.113 12.611-28.113 28.113v13.117c-6.181.027-11.203 5.062-11.203 11.249v37.991h-177.228c-7.119 0-12.91 5.787-12.91 12.9v91.43c0 4.142 3.358 7.5 7.5 7.5s7.5-3.358 7.5-7.5v-89.33h175.139v44.329c0 39.815 7.374 116.114 28.938 149.356 2.292 3.532 6.171 5.641 10.378 5.641s8.086-2.109 10.376-5.641c10.835-16.702 17.468-43.868 21.093-63.395.756-4.073-1.933-7.987-6.005-8.743-4.077-.755-7.988 1.933-8.743 6.005-.675 3.635-1.391 7.15-2.136 10.563h-29.208c-4.666-21.529-7.695-46.252-8.983-69.382h47.218c-.447 8.075-1.101 16.281-1.956 24.403-.433 4.119 2.555 7.81 6.674 8.244 4.114.426 7.811-2.555 8.244-6.674 1.792-17.039 2.74-34.459 2.74-50.377v-44.329h16.609v22.93c0 4.142 3.358 7.5 7.5 7.5s7.5-3.358 7.5-7.5v-22.93h27.07v391.53h-69.35c-4.142 0-7.5 3.358-7.5 7.5s3.358 7.5 7.5 7.5h71.44c7.119 0 12.91-5.787 12.91-12.9v-395.73c.002-7.113-5.79-12.9-12.908-12.9zm-100.086-75.47c7.231 0 13.114 5.883 13.114 13.113v13.114h-26.227v-13.114c0-7.23 5.883-13.113 13.113-13.113zm10.889 243.585c-3.27 11.764-6.966 21.544-10.894 28.705-4.16-7.524-7.809-17.404-10.935-28.705zm-35.091-99.381c-.074-3.193-.113-6.335-.113-9.405 0-24.255 0-69.431 0-93.571h48.632v93.571c0 3.077-.047 6.225-.119 9.405zm63.518-68.734v-15.44h10.14c3.567 0 6.47 2.907 6.47 6.48v8.96z"/><path d="m355.259 497h-181.13c4.755-6.299 7.58-14.133 7.58-22.615 0-19.708-15.238-35.913-34.55-37.479v-26.161c4.764-1.83 9.23-4.652 13.065-8.486 14.666-14.666 14.666-38.529 0-53.195l-13.065-13.065v-106.199c0-4.142-3.358-7.5-7.5-7.5s-7.5 3.358-7.5 7.5v91.198l-20.787-20.787c-14.701-14.701-38.494-14.702-53.196 0-14.666 14.667-14.666 38.53 0 53.195l48.852 48.852c6.961 6.961 15.993 10.611 25.131 10.965v23.548h-57.153c-20.741 0-37.615 16.874-37.615 37.615s16.874 37.615 37.615 37.615h280.252c4.142 0 7.5-3.358 7.5-7.5s-3.357-7.501-7.499-7.501zm-188.551-22.615c0 12.252-9.796 22.253-21.966 22.599-.096 0-.192.004-.288.007-.121.002-.24.009-.362.009h-27.042v-45.23h27.043c12.47 0 22.615 10.145 22.615 22.615zm-97.926-163.568c8.838-8.838 23.144-8.839 31.983 0l19.123 19.123-31.983 31.983-19.123-19.123c-8.817-8.818-8.817-23.165 0-31.983zm29.73 61.712 31.983-31.983c27.792 27.792 14.436 14.436 19.123 19.123 8.817 8.818 8.817 23.165 0 31.982-8.817 8.816-23.166 8.817-31.983 0zm-46.121 101.856c0-12.47 10.145-22.615 22.615-22.615h27.043v45.23h-27.043c-12.47 0-22.615-10.145-22.615-22.615z"/><path d="m268.27 168.023c0-15.098-12.283-27.381-27.381-27.381h-28.503c-4.142 0-7.5 3.358-7.5 7.5v39.762 34.407c0 4.142 3.358 7.5 7.5 7.5s7.5-3.358 7.5-7.5v-26.907h2.135l25.298 25.298-11.797 11.797c-2.929 2.929-2.929 7.678 0 10.606 2.929 2.929 7.678 2.929 10.606 0l11.797-11.797 10.692 10.692c2.929 2.929 7.678 2.929 10.606 0 2.929-2.929 2.929-7.678 0-10.606l-10.692-10.692 11.796-11.796c2.929-2.929 2.929-7.678 0-10.606-2.929-2.929-7.678-2.929-10.606 0l-11.796 11.796-14.791-14.791c14.051-1.147 25.136-12.94 25.136-27.282zm-15 0c0 6.827-5.554 12.381-12.381 12.381h-21.003v-24.762h21.003c6.827.001 12.381 5.555 12.381 12.381z"/><path d="m212.386 300.624h59.267c4.142 0 7.5-3.358 7.5-7.5s-3.358-7.5-7.5-7.5h-59.267c-4.142 0-7.5 3.358-7.5 7.5s3.358 7.5 7.5 7.5z"/><path d="m393.907 358.063h-181.044c-4.142 0-7.5 3.358-7.5 7.5s3.358 7.5 7.5 7.5h181.044c4.142 0 7.5-3.358 7.5-7.5s-3.358-7.5-7.5-7.5z"/><path d="m393.907 430.502h-181.044c-4.142 0-7.5 3.358-7.5 7.5s3.358 7.5 7.5 7.5h181.044c4.142 0 7.5-3.358 7.5-7.5s-3.358-7.5-7.5-7.5z"/>
                        </g>
                    </svg>
                    Antecedentes Podológicos y Médicos
                </h2>
                <div class="form-group">
                    <label>Condiciones Relevantes:</label>
                    <div class="checkbox-group">
                        <label>
                            <input type="checkbox" name="podiatricHistory" value="Diabetes Mellitus">
                            <span class="checkmark"></span> Diabetes Mellitus
                        </label>
                        <label>
                            <input type="checkbox" name="podiatricHistory" value="Hipertensión arterial">
                            <span class="checkmark"></span> Hipertensión arterial
                        </label>
                        <label>
                            <input type="checkbox" name="podiatricHistory" value="Problemas vasculares">
                            <span class="checkmark"></span> Problemas vasculares
                        </label>
                        <label>
                            <input type="checkbox" name="podiatricHistory" value="Pie plano / pie cavo">
                            <span class="checkmark"></span> Pie plano / pie cavo
                        </label>
                        <label>
                            <input type="checkbox" name="podiatricHistory" value="Antecedentes de onicomicosis">
                            <span class="checkmark"></span> Antecedentes de onicomicosis
                        </label>
                        <label>
                            <input type="checkbox" name="podiatricHistory" value="Cirugías previas podológicas" onchange="toggleOtherInput(this, 'otherPodiatricSurgery')">
                            <span class="checkmark"></span> Cirugías previas podológicas
                        </label>
                        <label>
                            <input type="checkbox" name="podiatricHistory" value="Traumatismos en miembros inferiores" onchange="toggleOtherInput(this, 'otherTraumatisms')">
                            <span class="checkmark"></span> Traumatismos en miembros inferiores
                        </label>
                        <label>
                            <input type="checkbox" name="podiatricHistory" value="Otros" onchange="toggleOtherInput(this, 'otherMedicalHistory')">
                            <span class="checkmark"></span> Otros
                        </label>
                    </div>
                    <input type="text" id="otherPodiatricSurgery" name="otherPodiatricSurgery" class="other-input" placeholder="Especificar cirugías previas podológicas">
                    <input type="text" id="otherTraumatisms" name="otherTraumatisms" class="other-input" placeholder="Especificar traumatismos">
                    <input type="text" id="otherMedicalHistory" name="otherMedicalHistory" class="other-input" placeholder="Especificar otros antecedentes">
                </div>

                <div class="form-group" id="diabetesInfoGroup">
                    <label for="currentTreatment">Si aplica: Tratamiento médico actual (para DM/otras crónicas):</label>
                    <select id="currentTreatment" name="currentTreatment" onchange="toggleOtherSelectInput(this, 'otherCurrentTreatment')">
                        <option value="">Seleccione</option>
                        <option value="Insulina">Insulina</option>
                        <option value="Hipoglucemiantes Orales">Hipoglucemiantes Orales</option>
                        <option value="Dieta y Ejercicio">Dieta y Ejercicio</option>
                        <option value="Fármacos Vasculares">Fármacos Vasculares</option>
                        <option value="Otro">Otro</option>
                    </select>
                    <input type="text" id="otherCurrentTreatment" name="otherCurrentTreatment" class="other-input" placeholder="Especificar otro tratamiento">
                </div>
            </section>

            <section>
                <h2>
                    <svg id="lifestyle-icon" viewBox="0 0 250 250" xmlns="http://www.w3.org/2000/svg" style="fill:var(--primary-dark); width: 42px; height: 42px;">
                        <g>
                            <path d="m137.1 175.34a2 2 0 0 1 -1-.27 2 2 0 0 1 -.74-2.73l9.09-15.86a2 2 0 0 1 3.47 2l-9.09 15.86a2 2 0 0 1 -1.73 1z"/>
                            <path d="m146.19 159.47a2 2 0 0 1 -1.73-3l24-41.95-3.44-2a6.75 6.75 0 0 0 -9.22 2.5l-4.15 7.24a2 2 0 0 1 -3.47-2l4.15-7.23a10.74 10.74 0 0 1 14.68-4l5.17 3a2 2 0 0 1 .74 2.73l-25 43.68a2 2 0 0 1 -1.73 1.03z"/>
                            <path d="m76 123.39a2 2 0 0 1 -.78-.16 2 2 0 0 1 -1.06-2.63 13.9 13.9 0 0 1 7.59-7.47l13.25-5.39a16.51 16.51 0 0 0 10.11-17.87 8.78 8.78 0 0 1 13.07-9l35.8 20.65a8.39 8.39 0 0 1 3.02 11.48l-2.22 3.88a2 2 0 0 1 -3.47-2l2.22-3.88a4.4 4.4 0 0 0 -1.62-6l-35.8-20.65a4.79 4.79 0 0 0 -7.11 4.91 20.49 20.49 0 0 1 -12.55 22.19l-13.22 5.38a9.92 9.92 0 0 0 -5.42 5.34 2 2 0 0 1 -1.81 1.22z"/>
                            <path d="m75.82 227.27h-.07a2 2 0 1 1 0-4 22.59 22.59 0 0 0 18.81-10l2.82-4.27 31-54.09a2 2 0 1 1 3.47 2l-31 54.15-.08.12-2.86 4.27a26.59 26.59 0 0 1 -22 11.81z"/>
                            <path d="m54.9 227.27h-19.57a2 2 0 0 1 -2-2v-6.71c0-10.74 6.12-18.37 16.39-20.42l20-3.73c8-18.78 7.24-40.91 5.15-56.27a2 2 0 1 1 4-.54c2.2 16.14 3 39.55-5.88 59.39a2 2 0 0 1 -1.46 1.15l-21 3.92c-11.87 2.38-13.15 12.33-13.15 16.5v4.71h17.52a2 2 0 1 1 0 4z"/>
                            <path d="m135.73 161.14a2 2 0 0 1 -1-.26l-11.18-6.41a2 2 0 0 1 -.94-1.21 2 2 0 0 1 .2-1.52l19.84-34.62a2 2 0 0 1 1.21-.93 2 2 0 0 1 1.52.19l11.18 6.41a2 2 0 0 1 .74 2.73l-19.84 34.62a2 2 0 0 1 -1.73 1zm-8.45-9.14 7.72 4.42 17.84-31.14-7.71-4.42z"/>
                            <path d="m78.2 156.39a2 2 0 0 1 -.55-3.92l54.27-15.47a2 2 0 1 1 1.09 3.84l-54.27 15.47a2 2 0 0 1 -.54.08z"/>
                            <path d="m78.18 164.13a2 2 0 0 1 -.55-3.92l49.13-14.21a2 2 0 0 1 1.11 3.84l-49.13 14.21a2.23 2.23 0 0 1 -.56.08z"/>
                            <path d="m79.42 171.14a2 2 0 0 1 -.55-3.92l49.13-14.22a2 2 0 1 1 1.11 3.84l-49.11 14.22a1.77 1.77 0 0 1 -.58.08z"/>
                            <path d="m76.67 179.24a2 2 0 0 1 -.55-3.92l49.37-14.22a2 2 0 1 1 1.11 3.9l-49.38 14.16a1.75 1.75 0 0 1 -.55.08z"/>
                            <path d="m71.35 204.34a11.73 11.73 0 0 1 -10-5.62 2 2 0 1 1 3.42-2.07 7.63 7.63 0 0 0 6.87 3.69 7.29 7.29 0 0 0 6.31-4c.2-.39.39-.79.57-1.19 5.49-12.05 13.9-35 9.8-55.39l-11.59-.32a1.89 1.89 0 0 1 -1-.3l-7.8-4.94a8.59 8.59 0 0 1 -2.19-12.51 8.51 8.51 0 0 1 6.66-3.32 8.61 8.61 0 0 1 6.76 3.13l12.32 15a1.33 1.33 0 0 1 .14.19 1.94 1.94 0 0 1 .29.68c5.09 21.92-3.91 46.63-9.76 59.47-.2.46-.42.91-.65 1.36a11.23 11.23 0 0 1 -9.73 6.13zm6-68.85 8.22.23-9.55-11.65a4.62 4.62 0 0 0 -3.61-1.67 4.58 4.58 0 0 0 -2.39 8.45z"/>
                            <path d="m76.25 181.68a2 2 0 0 1 -1.49-.66 6.94 6.94 0 0 1 1.36-10.43l.23-.15a2 2 0 [1] 2.19 3.35l-.22.15a2.92 2.92 0 0 0 -.58 4.41 2 2 0 0 1 -.16 2.82 2 2 0 0 1 -1.33.51z"/>
                            <path d="m77.44 172.05a2 2 0 0 1 -1.49-.66 6.93 6.93 0 0 1 1.37-10.39l.22-.14a2 2 0 1 1 2.19 3.34l-.22.15a2.91 2.91 0 0 0 -1.3 2.07 2.94 2.94 0 0 0 .72 2.34 2 2 0 0 1 -1.49 3.33z"/>
                            <path d="m77.62 163.13a2 2 0 0 1 -1.49-.67 6.92 6.92 0 0 1 1.37-10.46l.22-.15a2 2 0 0 1 2.77.58 2 2 0 0 1 -.58 2.77l-.23.14a2.94 2.94 0 0 0 -1.29 2.08 2.88 2.88 0 0 0 .72 2.33 2 2 0 0 1 -1.49 3.34z"/>
                            <path d="m96.56 241.28h-57a9.84 9.84 0 0 1 -9.83-9.83 8.18 8.18 0 0 1 8.17-8.18h2.37a2 2 0 1 1 0 4h-2.37a4.18 4.18 0 0 0 -4.17 4.18 5.84 5.84 0 0 0 5.83 5.83h57a6 6 0 0 0 5.32-3.17l33.46-61.72a2 2 0 1 1 3.52 1.9l-33.46 61.71a10 10 0 0 1 -8.84 5.28z"/>
                            <path d="m75.82 232.52h-20.92a2 2 0 0 1 -2-2v-10.52a2 2 0 0 1 2-2h20.92a2 2 0 0 1 2 2v10.51a2 2 0 0 1 -2 2.01zm-18.92-4h16.92v-6.52h-16.92z"/>
                            <path d="m108.85 85.81a2 2 0 0 1 -1.52-.7l-62.44-73.11a2 2 0 0 1 3-2.6l62.44 73.09a2 2 0 0 1 -1.52 3.3z"/>
                            <path d="m70.89 122.4a2 2 0 0 1 -1.48-.66l-59.8-65.74a2 2 0 0 1 .13-2.82 2 2 0 0 1 2.83.13l59.8 65.79a2 2 0 0 1 -.13 2.83 2.06 2.06 0 0 1 -1.35.47z"/>
                            <path d="m30.58 78.05a2 2 0 0 1 -1.48-.65 2 2 0 0 1 .13-2.82l40.1-36.68a2 2 0 1 1 2.7 3l-40.1 36.63a2 2 0 0 1 -1.35.52z"/>
                            <path d="m85.61 83.72a2 2 0 0 1 -1.53-.7l-25.84-30.2a2 2 0 0 1 3-2.6l25.84 30.2a2 2 0 0 1 -.22 2.82 2 2 0 0 1 -1.25.48z"/>
                            <path d="m76.75 100.72a2 2 0 0 1 -1.48-.66l-31.43-34.6a2 2 0 0 1 3-2.69l31.43 34.6a2 2 0 0 1 -1.48 3.35z"/>
                            <path d="m220.67 207.9h-53a2 2 0 0 1 0-4h53a2 2 0 0 1 0 4z"/>
                            <path d="m208.41 225.06h-73.41a2 2 0 0 1 0-4h73.37a2 2 0 1 1 0 4z"/>
                            <path d="m203.48 64.1h-59.34a2 2 0 0 1 0-4h59.34a2 2 0 1 1 0 4z"/>
                            <path d="m164.19 26.87h-59.19a2 2 0 1 1 0-4h59.15a2 2 0 0 1 0 4z"/>
                            <path d="m238.91 53.52h-44.91a2 2 0 0 1 0-4h44.9a2 2 0 0 1 0 4z"/>
                            <path d="m237.51 147h-48a2 2 0 1 1 0-4h48a2 2 0 0 1 0 4z"/>
                            <path d="m213.48 122.4h-27a2 2 0 0 1 0-4h27a2 2 0 0 1 0 4z"/>
                        </g>
                    </svg>
                    Estilo de Vida y Hábitos
                </h2>
                <div class="form-group">
                    <label>Actividad física:</label>
                    <div class="radio-group">
                        <label>
                            <input type="radio" name="physicalActivity" value="Sedentario">
                            <span class="radiomark"></span> Sedentario
                        </label>
                        <label>
                            <input type="radio" name="physicalActivity" value="Leve">
                            <span class="radiomark"></span> Leve
                        </label>
                        <label>
                            <input type="radio" name="physicalActivity" value="Moderada">
                            <span class="radiomark"></span> Moderada
                        </label>
                        <label>
                            <input type="radio" name="physicalActivity" value="Intensa">
                            <span class="radiomark"></span> Intensa
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="usualFootwear">Tipo de calzado que usa normalmente:</label>
                    <select id="usualFootwear" name="usualFootwear" onchange="toggleOtherSelectInput(this, 'otherFootwear')">
                        <option value="">Seleccione</option>
                        <option value="Deportivo">Deportivo</option>
                        <option value="Casual (Cerrado)">Casual (Cerrado)</option>
                        <option value="Formal">Formal</option>
                        <option value="Sandalias / Abierto">Sandalias / Abierto</option>
                        <option value="Ortopédico / Especial">Ortopédico / Especial</option>
                        <option value="Otro">Otro</option>
                    </select>
                    <input type="text" id="otherFootwear" name="otherFootwear" class="other-input" placeholder="Especificar otro tipo de calzado">
                </div>
                <div class="form-group">
                    <label for="dailyWalkFrequency">Frecuencia de caminata (Tiempo o distancia):</label>
                    <input type="text" id="dailyWalkFrequency" name="dailyWalkFrequency" placeholder="Ej. 30 minutos al día, 5 km a la semana, etc.">
                </div>
                <div class="form-group">
                    <label>Hábitos tóxicos:</label>
                    <div class="checkbox-group">
                        <label>
                            <input type="checkbox" name="toxicologicalHabits" value="Tabaquismo">
                            <span class="checkmark"></span> Tabaquismo
                        </label>
                        <label>
                            <input type="checkbox" name="toxicologicalHabits" value="Alcohol">
                            <span class="checkmark"></span> Alcohol
                        </label>
                        <label>
                            <input type="checkbox" name="toxicologicalHabits" value="Otros (drogas)">
                            <span class="checkmark"></span> Otros (drogas)
                        </label>
                        <label>
                            <input type="checkbox" name="toxicologicalHabits" value="Ninguno">
                            <span class="checkmark"></span> Ninguno
                        </label>
                    </div>
                </div>
                <div class="form-group stress-slider-group">
                    <label for="stressLevel">Nivel de estrés percibido (1-10):</label>
                    <div class="stress-slider-container">
                        <input type="range" id="stressLevel" name="stressLevel" min="1" max="10" value="5">
                        <span id="stressValue" class="stress-value">5</span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="treatmentAdherence">Adherencia a indicaciones médicas:</label>
                    <select id="treatmentAdherence" name="treatmentAdherence">
                        <option value="">Seleccione</option>
                        <option value="Buena">Buena</option>
                        <option value="Regular">Regular</option>
                        <option value="Mala">Mala</option>
                    </select>
                </div>
            </section>
            
            <section>
                <h2>
                    <svg id="podiatric-exploration-icon" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg" style="fill:var(--primary-dark);">
                        <g id="011---Foot-Prints" transform="translate(-1)"><path id="Shape" d="m26.68 56.81c2.062-3.066 2.019-7.954-.129-14.528-3.731-11.42-.918-12.292-.17-16.544 1.227-6.969-2.029-10.993-9.781-9.569-7.157 1.313-11.618 6.125-9.989 12.9 1.474 6.131 5.559 8.56 4.247 17.358-2.149 14.43 11.742 16.454 15.822 10.383zm-16.158-23.21c-1.822-3.761-3.417-7.609-1.105-11.162 1.41-2.168 4.019-3.655 7.544-4.3 5.843-1.071 8.531 1.118 7.451 7.255-.674 3.827-3.7 5.441.238 17.512 1.919 5.875 2.047 10.3.371 12.79-2.884 4.285-14.03 3.405-12.184-8.973.951-6.384-.709-9.81-2.315-13.122z"/><path id="Shape" d="m7.982 17.5c1.44672609.0715088 2.7221882-.9408171 2.981-2.366.7633522.368892 1.6484346.3918944 2.4299176.063151.781483-.3287433 1.3839722-.9775165 1.6540824-1.781151.6095665.557125 1.438758.8080169 2.254939.6822862.816181-.1257308 1.5314234-.614539 1.945061-1.3292862 2.516 3.822 7.618 1.727 7.94-3.791.367-6.3-5.7-8.51-8.211-3.507-1.817-2.305-4.752-1.533-5.572 1.755-2.2-1.681-4.929-.282-5.142 2.79-2.565-1-4.783 1.168-4.084 4.061-2.984-.012-4.264 3.523-2.098 5.813 2.326 2.46 6.305.997 5.902-2.39zm14.862-12.783c1.6 0 2.459 2.279 2.35 4.141-.126 2.164-1.363 3.935-2.728 3.848s-2.389-1.974-2.266-4.139c.126-2.117 1.325-3.85 2.644-3.85zm-6.344 1.428h.042c.683 0 1.5 1.158 1.653 2.778 0 .20533333.007.40766667.021.607-.031 1.466-.656 2.557-1.291 2.6-.711.057-1.587-1.173-1.709-2.886-.116-1.686.594-3.051 1.284-3.099zm-5.1 2.363c.673 0 1.548.785 1.882 2.092.461 1.808-.493 3.653-1.9 2.454-1.644-1.387-1.352-4.546.018-4.546zm-3.82 3.376c1.48.625 2.005 2.934.965 3.515-.734.41-1.727-.325-2.163-1.1-.788-1.416-.182-2.999 1.198-2.415zm-3.258 4.179c1.368.13 2.243 1.9 1.348 2.749-.67586206.4959042-1.62380515.3628285-2.137-.3-.979-1.031-.545-2.57.789-2.449z"/><path id="Shape" d="m54.876 27.034c1.927-6.712-2.347-11.7-9.417-13.32-7.659-1.752-11.115 2.086-10.189 9.134.562 4.278 3.333 5.276-.891 16.521-2.433 6.474-2.689 11.356-.762 14.508 3.777 6.18 17.786 4.9 16.258-9.683-.926-8.848 3.258-11.087 5.001-17.16zm-6.99 17.366c.834 7.961-3.473 11.469-8.322 10.905-6.864-.787-5.764-8.705-3.313-15.233 4.465-11.886 1.507-13.63 1-17.485-.791-6.011 1.822-8.28 7.76-6.923 3.493.8 6.034 2.4 7.348 4.626 2.155 3.652.385 7.441-1.59 11.1-1.747 3.242-3.555 6.592-2.883 13.01z"/><path id="Shape" d="m54.053 7.93c-.078-3.1-2.754-4.586-5.018-3.01-.694-3.439-3.625-4.153-5.487-1.991-.6145628-1.67596993-2.1658307-2.82684726-3.948-2.929-2.215.033-4.466 2.362-4.412 6.065.082 5.5 5.063 7.852 7.759 4.121.37854.7386901 1.0734385 1.2642965 1.8872708 1.4274914s1.6576536-.0538575 2.2917292-.5894914c.2349442.8148956.8083607 1.4897493 1.5746309 1.8531825.7662701.3634332 1.6516759.3804822 2.4313691.0468175.1995285 1.432756 1.4244175 2.4993608 2.871 2.5-.1902749.9313402.0535633 1.8986576.662587 2.6285132.6090238.7298556 1.5170548 1.1429413 2.467413 1.1224868 3.151 0 5.1-3.886 2.983-6.077-.5734846-.5784894-1.3486571-.9124981-2.163-.932.828-2.86-1.292-5.129-3.9-4.236zm-14.303 2.07c-2.2.032-3.475-4.406-1.758-6.937 1.676-2.47 4.151-.314 4.2 2.9.0355269 1.04888999-.2430463 2.08448609-.8 2.974-.3477793.59468628-.9570589.98912242-1.642 1.063zm4.412-3.486c.2-1.707 1.144-2.907 1.832-2.809 1.159.132 1.808 3.489.309 5.369-1.314 1.65-2.38-.484-2.141-2.561zm4.855 1.786c.43-1.42 1.487-2.177 2.164-1.975 1.23.373 1.194 3.3-.369 4.511-1.468 1.131-2.334-.757-1.795-2.536zm4.043 4.119c-.0972213-1.3034728.8118156-2.46747291 2.1-2.689 1.127 0 1.255 1.487.592 2.562-.832 1.338-2.529 1.631-2.692.122zm5.351 4.215c-1.04 1.009-2.57.558-2.462-.76.109525-.9243977.8535298-1.644591 1.781-1.724 1.308-.078 1.729 1.464.681 2.479z"/></g>
                    </svg>
                    Exploración Clínica Podológica
                </h2>
                <div class="evaluation-group">
                    <h4>Evaluación Podológica Específica</h4>
                    <div class="grid-container">
                        <div class="form-group">
                            <label>Uñas:</label>
                            <div class="checkbox-group">
                                <label><input type="checkbox" name="nailEvaluation" value="Sanas"> Sanas</label>
                                <label><input type="checkbox" name="nailEvaluation" value="Onicomicosis"> Onicomicosis</label>
                                <label><input type="checkbox" name="nailEvaluation" value="Onicogrifosis"> Onicogrifosis</label>
                                <label><input type="checkbox" name="nailEvaluation" value="Onicocriptosis"> Onicocriptosis (Uña encarnada)</label>
                                <label><input type="checkbox" name="nailEvaluation" value="Otros" onchange="toggleOtherInput(this, 'otherNailEvaluation')"> Otros</label>
                            </div>
                            <input type="text" id="otherNailEvaluation" name="otherNailEvaluation" class="other-input" placeholder="Especificar otra condición de uñas">
                        </div>
                        <div class="form-group">
                            <label>Piel y Tegumentos:</label>
                            <div class="checkbox-group">
                                <label><input type="checkbox" name="skinEvaluation" value="Sana"> Sana</label>
                                <label><input type="checkbox" name="skinEvaluation" value="Hiperqueratosis"> Hiperqueratosis (Callosidad)</label>
                                <label><input type="checkbox" name="skinEvaluation" value="Maceración"> Maceración interdigital</label>
                                <label><input type="checkbox" name="skinEvaluation" value="Verrugas"> Verrugas plantares</label>
                                <label><input type="checkbox" name="skinEvaluation" value="Eccemas/dermatitis"> Eccemas/dermatitis</label>
                                <label><input type="checkbox" name="skinEvaluation" value="Grietas/Fisuras"> Grietas/Fisuras</label>
                                <label><input type="checkbox" name="skinEvaluation" value="Heridas/Úlceras"> Heridas/Úlceras</label>
                                <label><input type="checkbox" name="skinEvaluation" value="Otros" onchange="toggleOtherInput(this, 'otherSkinEvaluation')"> Otros</label>
                            </div>
                            <input type="text" id="otherSkinEvaluation" name="otherSkinEvaluation" class="other-input" placeholder="Especificar otra condición de piel">
                        </div>
                    </div>
                </div>

                <div class="evaluation-group">
                    <h4>Evaluación Biomecánica y Vascular/Neurológica</h4>
                    <div class="grid-container">
                        <div class="form-group">
                            <label for="gaitEvaluation">Marcha y Postura:</label>
                            <select id="gaitEvaluation" name="gaitEvaluation" onchange="toggleOtherSelectInput(this, 'otherGaitEvaluation')">
                                <option value="Normal">Normal</option>
                                <option value="Pronadora">Pronadora</option>
                                <option value="Supinadora">Supinadora</option>
                                <option value="Claudicación">Claudicación</option>
                                <option value="Marcha Antálgica">Marcha Antálgica</option>
                                <option value="Otro">Otro</option>
                            </select>
                            <input type="text" id="otherGaitEvaluation" name="otherGaitEvaluation" class="other-input" placeholder="Especificar otra anomalía en la marcha">
                        </div>
                        <div class="form-group">
                            <label for="vascularPulses">Exploración Vascular (Pulsos):</label>
                            <select id="vascularPulses" name="vascularPulses">
                                <option value="Normal">Normal</option>
                                <option value="Disminuidos">Disminuidos</option>
                                <option value="Ausentes">Ausentes</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="capillaryRefill">Llenado Capilar:</label>
                            <select id="capillaryRefill" name="capillaryRefill">
                                <option value="Normal (< 2 seg)">Normal (< 2 seg)</option>
                                <option value="Retardado (2-3 seg)">Retardado (2-3 seg)</option>
                                <option value="Muy Retardado (> 3 seg)">Muy Retardado (> 3 seg)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="footTemperature">Temperatura del Pie:</label>
                            <select id="footTemperature" name="footTemperature">
                                <option value="Normal">Normal</option>
                                <option value="Caliente">Caliente (Signo de inflamación)</option>
                                <option value="Frío">Frío (Signo de isquemia)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="neurologicalEvaluation">Exploración Neurológica Básica:</label>
                            <select id="neurologicalEvaluation" name="neurologicalEvaluation" onchange="toggleOtherSelectInput(this, 'otherNeurologicalEvaluation')">
                                <option value="Sensibilidad Conservada">Sensibilidad Conservada</option>
                                <option value="Disminución Sensibilidad">Disminución Sensibilidad (Monofilamento/Diapasón)</option>
                                <option value="Ausencia Sensibilidad">Ausencia Sensibilidad</option>
                                <option value="Otro">Otro</option>
                            </select>
                            <input type="text" id="otherNeurologicalEvaluation" name="otherNeurologicalEvaluation" class="other-input" placeholder="Especificar otro hallazgo neurológico">
                        </div>
                        <div class="form-group">
                            <label for="affectedSide">Lado(s) Afectado(s):</label>
                            <select id="affectedSide" name="affectedSide">
                                <option value="N/A">N/A</option>
                                <option value="Pie Izquierdo">Pie Izquierdo</option>
                                <option>Pie Derecho</option>
                                <option value="Ambos Pies">Ambos Pies</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="clinicalObservations">Observaciones Adicionales de la Exploración:</label>
                    <textarea id="clinicalObservations" name="clinicalObservations" placeholder="Describa aquí hallazgos no contemplados, deformidades o el área principal de la lesión."></textarea>
                </div>
            </section>
            
            <section>
                <h2>
                    <svg id="treatment-plan-icon" viewBox="0 0 485.131 485.131" xmlns="http://www.w3.org/2000/svg" style="fill:var(--primary-dark);">
                        <g><path d="m407.249 460.649h14.938v15.365h-14.938z" transform="matrix(.622 -.783 .783 .622 -209.944 501.846)"/><path d="m285.655 381.641h-.163c-20.66 0-37.469-16.809-37.469-37.469 0-1.802.129-3.615.384-5.387 3.917-27.222-6.43-64.398-23.556-84.636l-1.289-1.522c-2.593-3.064-3.838-6.955-3.505-10.957.333-4.001 2.205-7.633 5.269-10.227 6.327-5.354 15.83-4.563 21.123 1.69l28.598 34.685 23.997 29.959 11.659-9.338-11.411-14.247c5.351-3.079 8.676-8.712 8.676-15.093v-85.669l47.867 10.368c4.806 1.041 8.575 4.82 9.602 9.628l4.297 20.107 14.608-3.121-4.298-20.108c-2.252-10.539-10.514-18.823-21.047-21.105l-51.057-11.059-.167-83.572c0-15.883-12.921-28.804-28.803-28.804-7.537 0-13.559 1.688-18.045 5.044-.792-1.275-1.7-2.519-2.738-3.702-5.185-5.916-12.698-9.146-21.726-9.34l-.161-.002c-5.239 0-10.17 1.384-14.422 3.835-3.124-12.526-14.471-21.835-27.951-21.835-8.449 0-16.061 3.657-21.334 9.472-5.273-5.814-12.885-9.472-21.334-9.472-6.192 0-11.935 1.964-16.636 5.302-4.626-9.735-14.556-16.481-26.033-16.481h-11.881c-15.882 0-28.803 12.921-28.803 28.804l.125 141.052c0 24.069 12.915 46.555 33.705 58.682 16.219 9.462 26.295 27.004 26.295 45.78v25.269h14.938v-25.269c0-24.069-12.915-46.555-33.706-58.683-16.219-9.461-26.294-27.003-26.294-45.779l-.125-141.051c0-7.646 6.22-13.866 13.866-13.866h11.882c7.646 0 13.866 6.221 13.866 13.866v11.18 52.389h14.938v-52.389c0-7.646 6.22-13.866 13.866-13.866 7.645 0 13.865 6.221 13.865 13.866v56.04h14.938v-56.04c0-7.646 6.22-13.866 13.866-13.866s13.866 6.221 13.866 13.866v14.604 45.088h14.938v-44.36c1.259-6.488 6.848-11.163 13.493-11.199 4.795.118 8.294 1.496 10.694 4.21 3.601 4.071 4.384 10.725 4.387 14.65-.069.92-.114 1.864-.137 2.832l.114.008-.115 37.547 14.938.047.12-39.167c.01-.335.019-.689.021-1.074.604-7.615 3.164-11.053 12.724-11.053 7.646 0 13.866 6.221 13.866 13.881l.195 97.603v86.914c0 1.472-.911 2.107-1.676 2.382-.764.274-1.872.363-2.808-.771l-30.633-37.153c-10.675-12.613-29.622-14.191-42.236-3.517-6.11 5.171-9.841 12.412-10.505 20.39-.665 7.978 1.817 15.736 6.989 21.847l1.288 1.522c14.203 16.782 23.44 50.147 20.172 72.859-.355 2.475-.536 5.002-.536 7.513 0 28.897 23.509 52.406 52.406 52.406h.221c.193-.002.386-.002.58-.002 1.253 0 2.502.042 3.749.104-9.181 31.733-38.291 54.022-72.042 54.022-41.372 0-75.031-33.659-75.031-75.031v-52.562h-14.938v52.563c0 49.609 40.36 89.969 89.969 89.969 41.145 0 76.55-27.627 86.928-66.705 10.048 2.582 19.509 7.232 27.659 13.705l59.685 47.401 9.29-11.697-59.685-47.401c-15.877-12.608-35.902-19.456-56.226-19.304z"/><path d="m407.5 318.762-19.937-93.285-14.609 3.122 21.155 98.984 82.386 58.374 8.636-12.188z"/><path d="m224.952 158.172h14.972v38h-14.972z"/><path d="m149.375 233.749h38v14.973h-38z"/><path d="m179.653 176.936h14.971v38h-14.971z" transform="matrix(.707 -.707 .707 .707 -83.736 189.716)"/><path d="m388.73 6.172h15v15h-15z"/><path d="m388.73 36.172h15v15h-15z"/><path d="m403.73 21.172h15v15h-15z"/><path d="m373.73 21.172h15v15h-15z"/><path d="m15 405.672h15v15h-15z"/><path d="m15 435.672h15v15h-15z"/><path d="m30 420.672h15v15h-15z"/><path d="m0 420.672h15v15h-15z"/><path d="m45 255.641h15v14.938h-15z"/><path d="m423.036 150.704h15v14.938h-15z"/></g>
                    </svg>
                    Plan de Tratamiento Sugerido
                </h2>
                <div class="form-group">
                    <label for="hygieneIndications">Indicaciones de Higiene del pie:</label>
                    <textarea id="hygieneIndications" name="hygieneIndications" placeholder="Ej. Lavar diariamente con jabón neutro, secar meticulosamente entre los dedos, aplicar crema hidratante (evitando interdigital)"></textarea>
                </div>
                <div class="form-group">
                    <label for="nailCare">Corte y Cuidado de Uñas:</label>
                    <textarea id="nailCare" name="nailCare" placeholder="Ej. Corte recto, no redondear esquinas. Limar si hay onicogrifosis."></textarea>
                </div>
                <div class="form-group">
                    <label for="antifungalTreatments">Tratamientos Antimicóticos (Si Aplica):</label>
                    <textarea id="antifungalTreatments" name="antifungalTreatments" placeholder="Ej. Aplicar laca/crema fungicida en uñas afectadas, tratamiento oral si es sistémico."></textarea>
                </div>
                <div class="form-group">
                    <label for="orthoticsIndications">Órtesis Plantares / Calzado Especial (Si Aplica):</label>
                    <textarea id="orthoticsIndications" name="orthoticsIndications" placeholder="Ej. Evaluar plantillas de descarga a medida, calzado de horma ancha y puntera alta."></textarea>
                </div>
                <div class="form-group">
                    <label for="podiatricFollowUp">Seguimiento Podológico (Próxima Cita):</label>
                    <textarea id="podiatricFollowUp" name="podiatricFollowUp" placeholder="Ej. Revaloración en 15 días para quiropodia, seguimiento trimestral."></textarea>
                </div>
            </section>

            <section>
                <h2>
                    <svg viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-12h2v6h-2zm0 8h2v2h-2z"/>
                    </svg>
                    Fotografía Clínica
                </h2>
                
                <div class="clinical-images-grid">
                    
                    <div class="form-group image-group-1">
                        <label for="footImageInput1">Imagen 1: Vista General / Lesión Principal:</label>
                        <div class="image-upload-area" id="footImageUploadArea1" onclick="document.getElementById('footImageInput1').click();">
                            <div class="upload-placeholder" id="footImagePlaceholder1">
                                <svg class="camera-icon" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                </svg>
                                <span class="upload-text">Haga clic para subir imagen</span>
                            </div>
                            <img class="uploaded-image" id="uploadedFootImage1" src="" alt="Imagen Clínica del Pie 1">
                            <input type="file" id="footImageInput1" name="footImage1" accept="image/*" onchange="handleFootImageUpload(event, 1)">
                        </div>
                    </div>
                    
                    <div class="form-group image-group-2">
                        <label for="footImageInput2">Imagen 2: Detalle (Uñas / Planta / Lateral):</label>
                        <div class="image-upload-area" id="footImageUploadArea2" onclick="document.getElementById('footImageInput2').click();">
                            <div class="upload-placeholder" id="footImagePlaceholder2">
                                <svg class="camera-icon" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                </svg>
                                <span class="upload-text">Haga clic para subir imagen</span>
                            </div>
                            <img class="uploaded-image" id="uploadedFootImage2" src="" alt="Imagen Clínica del Pie 2">
                            <input type="file" id="footImageInput2" name="footImage2" accept="image/*" onchange="handleFootImageUpload(event, 2)">
                        </div>
                    </div>
                    
                    <div class="form-group image-group-3">
                        <label for="footImageInput3">Imagen 3: Detalle (Estructura / Biomecánica):</label>
                        <div class="image-upload-area" id="footImageUploadArea3" onclick="document.getElementById('footImageInput3').click();">
                            <div class="upload-placeholder" id="footImagePlaceholder3">
                                <svg class="camera-icon" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                </svg>
                                <span class="upload-text">Haga clic para subir imagen</span>
                            </div>
                            <img class="uploaded-image" id="uploadedFootImage3" src="" alt="Imagen Clínica del Pie 3">
                            <input type="file" id="footImageInput3" name="footImage3" accept="image/*" onchange="handleFootImageUpload(event, 3)">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="imageObservations">Comentarios sobre las fotografías:</label>
                    <textarea id="imageObservations" name="imageObservations" placeholder="Ej. Vista dorsal del pie izquierdo, se observa onicomicosis en el primer dedo. La segunda foto muestra callosidad submetatarsal en el segundo dedo."></textarea>
                </div>
            </section>

            <section>
                <h2>
                    <svg viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-12h2v6h-2zm0 8h2v2h-2z"/>
                    </svg>
                    Consentimiento Informado
                </h2>
                <div class="form-group">
                    <textarea id="consentText" name="consentText" style="width: 100%; min-height: 150px; font-size: 0.9em; margin-bottom: 15px; padding: 10px; border-radius: 10px; border: 1px solid var(--border-color);">
**Otorgo mi consentimiento para la valoración, diagnóstico y tratamiento podológico por parte del profesional sanitario.
Entiendo que el proceso incluye la exploración de mis pies y la toma de fotografías clínicas, las cuales se usarán para mi expediente y seguimiento.
He recibido explicaciones sobre mi condición y el plan de tratamiento sugerido, y mis dudas han sido resueltas. Acepto riesgos y beneficios los procedimientos.**
                    </textarea>
                    <label class="checkbox-group">
                        <input type="checkbox" id="consent" name="consent" required>
                        <span class="checkmark"></span> He leído y acepto el consentimiento informado.
                    </label>
                </div>
            </section>

            <section style="margin-top: 40px;">
                <h2>
                    <svg viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
                    </svg>
                    Firmas de Conformidad
                </h2>
                <div class="grid-container">
                    <div class="form-group">
                        <label>Firma del paciente o responsable:</label>
                        <div class="signature-pad-container">
                            <canvas id="patientSignatureCanvas" class="signature-canvas"></canvas>
                            <div class="signature-buttons">
                                <button type="button" onclick="clearSignature('patientSignatureCanvas')">Limpiar</button>
                            </div>
                        </div>
                        <input type="hidden" id="patientSignatureData" name="patientSignatureData">
                    </div>
                    <div class="form-group">
                        <label>Firma del profesional tratante:</label>
                        <div class="signature-pad-container">
                            <canvas id="professionalSignatureCanvas" class="signature-canvas"></canvas>
                            <div class="signature-buttons">
                                <button type="button" onclick="clearSignature('professionalSignatureCanvas')">Limpiar</button>
                            </div>
                        </div>
                        <input type="hidden" id="professionalSignatureData" name="professionalSignatureData">
                    </div>
                </div>
            </section>

            <div class="button-group">
                <button type="button" class="report-btn" onclick="generateReport()">Generar Reporte Clínico Podológico</button>
                <button type="reset" class="reset-btn">Reiniciar Formulario</button>
            </div>
        </form>

        <div id="reportContainer">
            </div>

    </div>

    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.0/dist/signature_pad.umd.min.js"></script>

    <script>
        // Stress Level Slider Script (Moved outside DOMContentLoaded to ensure early initialization)
        document.addEventListener('DOMContentLoaded', function() {
            const stressLevel = document.getElementById('stressLevel');
            const stressValue = document.getElementById('stressValue');
            stressLevel.oninput = function() {
                stressValue.textContent = this.value;
            };
        });

        document.addEventListener('DOMContentLoaded', function() {
            // Set current date
            const today = new Date();
            const year = today.getFullYear();
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const day = String(today.getDate()).padStart(2, '0');
            document.getElementById('assessmentDate').value = `${year}-${month}-${day}`;

            // Initialize Signature Pads
            const patientCanvas = document.getElementById('patientSignatureCanvas');
            const professionalCanvas = document.getElementById('professionalSignatureCanvas');
            
            // Adjust canvas size for high DPI screens
            function resizeCanvas(canvas) {
                const ratio = Math.max(window.devicePixelRatio || 1, 1);
                canvas.width = canvas.offsetWidth * ratio;
                canvas.height = canvas.offsetHeight * ratio;
                canvas.getContext('2d').scale(ratio, ratio);
            }
            resizeCanvas(patientCanvas);
            resizeCanvas(professionalCanvas);
            window.addEventListener('resize', () => {
                resizeCanvas(patientCanvas);
                resizeCanvas(professionalCanvas);
            });


            const patientSignaturePad = new SignaturePad(patientCanvas, {
                backgroundColor: 'rgb(255, 255, 255)',
                penColor: 'rgb(0, 0, 0)'
            });
            const professionalSignaturePad = new SignaturePad(professionalCanvas, {
                backgroundColor: 'rgb(255, 255, 255)',
                penColor: 'rgb(0, 0, 0)'
            });

            window.clearSignature = function(canvasId) {
                const canvas = document.getElementById(canvasId);
                let signaturePadInstance = (canvasId === 'patientSignatureCanvas') ? patientSignaturePad : professionalSignaturePad;
                if (signaturePadInstance) {
                    signaturePadInstance.clear();
                }
            };

            // Dynamic "Other" field logic
            window.toggleOtherInput = function(checkbox, inputId) {
                const input = document.getElementById(inputId);
                // Check if the current element is part of the specific groups that enable an 'other' text field
                const isSpecificOther = ['otherPodiatricSurgery', 'otherTraumatisms', 'otherMedicalHistory', 'otherNailEvaluation', 'otherSkinEvaluation'].includes(inputId);
                
                if (checkbox.checked && (checkbox.value.toLowerCase().includes('otro') || isSpecificOther)) {
                    input.style.display = 'block';
                    input.focus();
                } else if (!checkbox.checked) {
                    input.style.display = 'none';
                    input.value = ''; // Clear value when unchecked
                }
            };
            
            window.toggleOtherRadioInput = function(radio, inputId) {
                const input = document.getElementById(inputId);
                // Hide all relevant 'other' inputs in this section
                const section = radio.closest('section');
                if (section) {
                    section.querySelectorAll('.other-input').forEach(otherInput => {
                        otherInput.style.display = 'none';
                        if (otherInput.id !== inputId) otherInput.value = ''; // Clear only if it's not the target
                    });
                }
                
                if (radio.checked && radio.value.toLowerCase().includes('otro')) {
                    input.style.display = 'block';
                    input.focus();
                } else {
                    input.style.display = 'none';
                    input.value = '';
                }
            };


            window.toggleOtherSelectInput = function(select, inputId) {
                const input = document.getElementById(inputId);
                if (select.value === 'Otro') {
                    input.style.display = 'block';
                    input.focus();
                } else {
                    input.style.display = 'none';
                    input.value = '';
                }
            };

            // Image Upload for Foot Image (Handles multiple images)
            window.handleFootImageUpload = function(event, index) {
                const uploadedImage = document.getElementById(`uploadedFootImage${index}`);
                const placeholder = document.getElementById(`footImagePlaceholder${index}`);
                const uploadArea = document.getElementById(`footImageUploadArea${index}`);
                const file = event.target.files[0];

                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        uploadedImage.src = e.target.result;
                        uploadedImage.style.display = 'block';
                        placeholder.style.display = 'none';
                        uploadArea.classList.add('has-image'); // Añadir clase para cambiar estilo del borde
                    };
                    reader.readAsDataURL(file);
                } else {
                    uploadedImage.src = '';
                    uploadedImage.style.display = 'none';
                    placeholder.style.display = 'flex';
                    uploadArea.classList.remove('has-image'); // Quitar clase
                }
            };

            // Clinic Logo Preview
            const clinicLogoInput = document.getElementById('clinicLogoInput');
            const clinicLogoPreview = document.getElementById('clinicLogoPreview');
            const clinicLogoImg = document.getElementById('clinicLogoImg');
            const clinicLogoPlaceholderContent = document.getElementById('clinicLogoPlaceholderContent');

            clinicLogoPreview.addEventListener('click', () => {
                clinicLogoInput.click();
            });

            clinicLogoInput.addEventListener('change', function(event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        clinicLogoImg.src = e.target.result;
                        clinicLogoImg.style.display = 'block';
                        clinicLogoPlaceholderContent.style.display = 'none';
                        clinicLogoPreview.classList.add('has-image'); // Añadir clase para cambiar estilo del borde
                    };
                    reader.readAsDataURL(file);
                } else {
                    clinicLogoImg.src = '';
                    clinicLogoImg.style.display = 'none';
                    clinicLogoPlaceholderContent.style.display = 'flex';
                    clinicLogoPreview.classList.remove('has-image'); // Quitar clase
                }
            });

            // REPORT GENERATION LOGIC (Simplified as there's no dynamic evolution section in the new design)
            window.generateReport = function() {
                const reportContainer = document.getElementById('reportContainer');
                reportContainer.style.display = 'block';
                reportContainer.innerHTML = '<div id="reportContent"></div>';

                const reportContent = document.getElementById('reportContent');
                const form = document.getElementById('podiatryForm');

                // 1. Collect Data
                const data = {};
                form.querySelectorAll('input, select, textarea').forEach(input => {
                    const name = input.name;
                    if (input.type === 'checkbox' && input.checked) {
                        if (!data[name]) data[name] = [];
                        data[name].push(input.value);
                    } else if (input.type === 'radio' && input.checked) {
                        data[name] = input.value;
                    } else if (input.type !== 'checkbox' && input.type !== 'radio') {
                        data[name] = input.value;
                    }
                });

                // Incluir campos "Otro" solo si son visibles y llenados
                document.querySelectorAll('.other-input').forEach(input => {
                    if (input.style.display === 'block' && input.value.trim() !== '') {
                        let originalFieldName = ''; 

                        // Mapeo específico de campos 'other' a sus grupos
                        if (input.id === 'otherPodiatricSurgery' || input.id === 'otherTraumatisms' || input.id === 'otherMedicalHistory') originalFieldName = 'podiatricHistory';
                        else if (input.id === 'otherNailEvaluation') originalFieldName = 'nailEvaluation';
                        else if (input.id === 'otherSkinEvaluation') originalFieldName = 'skinEvaluation';
                        else if (input.id === 'otherGaitEvaluation') originalFieldName = 'gaitEvaluation';
                        else if (input.id === 'otherNeurologicalEvaluation') originalFieldName = 'neurologicalEvaluation';
                        else if (input.id === 'otherSpecialty') originalFieldName = 'specialty';
                        else if (input.id === 'otherPatientSex') originalFieldName = 'patientSex';
                        else if (input.id === 'otherCurrentTreatment') originalFieldName = 'currentTreatment';
                        else if (input.id === 'otherFootwear') originalFieldName = 'usualFootwear';
                        
                        
                        if (originalFieldName) {
                            if (Array.isArray(data[originalFieldName])) {
                                // Añadir valor 'other' personalizado a grupos de checkbox
                                data[originalFieldName].push(`(Especificado: ${input.value})`);
                            } else {
                                // Para radio/select, adjuntar el valor personalizado
                                data[originalFieldName] = `${data[originalFieldName] || ''} (Especificado: ${input.value})`;
                            }
                        }
                    }
                });

                // 2. Preparar datos visuales
                const clinicLogoSrc = document.getElementById('clinicLogoImg').src;
                const footImages = [1, 2, 3].map(i => {
                    const imgEl = document.getElementById(`uploadedFootImage${i}`);
                    return {
                        src: imgEl.src,
                        display: imgEl.style.display
                    };
                });
                
                const patientNameForConsent = data['patientName'] || 'Paciente';
                const specialistNameForConsent = data['specialistName'] || 'Especialista';
                const clinicNameForConsent = data['clinicName'] || 'Clínica';

                // 3. Función auxiliar para reportar checkboxes
                function formatReportCheckbox(values) {
                    if (!values || values.length === 0) {
                        return 'Ninguno/Normal';
                    }
                    return Array.isArray(values) ? values.join(', ') : values;
                }
                
                // Función auxiliar para generar HTML de imágenes en el reporte
                function generateReportImageHTML(src, display) {
                    if (src && display !== 'none' && src !== window.location.href) { // Añadida verificación adicional para src vacío
                        return `<div class="report-image" style="width: 250px; height: 250px; border: 2px solid var(--medium-grey); border-radius: 10px; overflow: hidden; display: flex; align-items: center; justify-content: center;"><img src="${src}" alt="Pie Afectado" style="max-width: 100%; max-height: 100%; object-fit: contain;"></div>`;
                    }
                    return '';
                }
                
                let reportImagesHTML = footImages.map(img => generateReportImageHTML(img.src, img.display)).join('');

                if (!reportImagesHTML) {
                    reportImagesHTML = '<div class="report-image" style="width: 100%; height: 100px; display: flex; align-items: center; justify-content: center; color: var(--medium-grey); border: 1px dashed var(--medium-grey); border-radius: 10px;"><span>No se adjuntaron imágenes clínicas.</span></div>';
                }

                // 4. Construir HTML del Reporte (Reflejando las nuevas secciones y títulos)
                let reportHtml = `
                    <div class="report-header">
                        <div class="report-header-left">
                            ${clinicLogoSrc && clinicLogoImg.style.display !== 'none' ? `<img src="${clinicLogoSrc}" alt="Logo Clínica" class="report-clinic-logo" style="width: 80px; height: 80px; object-fit: contain; margin-right: 15px;">` : ''}
                            <div class="report-clinic-info">
                                <h3>${data['clinicName'] || 'Clínica Podológica'}</h3>
                                <p><strong>Especialista:</strong> ${data['specialistName'] || 'N/A'}</p>
                                <p><strong>Especialidad:</strong> ${data['specialty'] || 'N/A'}</p>
                                <p><strong>Contacto:</strong> ${data['clinicPhone'] || 'N/A'} | ${data['clinicEmail'] || 'N/A'}</p>
                                <p><strong>Fecha de Valoración:</strong> ${data['assessmentDate'] || 'N/A'}</p>
                            </div>
                        </div>
                    </div>

                    <h2 class="report-title">Reporte Clínico Podológico</h2>

                    <div class="report-section">
                        <h3>Datos del Paciente</h3>
                        <div class="report-content">
                            <p><strong>Nombre:</strong> ${data['patientName'] || 'N/A'}</p>
                            <p><strong>Edad:</strong> ${data['patientAge'] || 'N/A'}</p>
                            <p><strong>Sexo:</strong> ${data['patientSex'] || 'N/A'}</p>
                            <p><strong>Domicilio:</strong> ${data['patientAddress'] || 'N/A'}</p>
                            <p><strong>Ocupación:</strong> ${data['patientOccupation'] || 'N/A'}</p>
                        </div>
                    </div>

                    <div class="report-section">
                        <h3>Antecedentes Podológicos y Médicos</h3>
                        <div class="report-content">
                            <p><strong>Condiciones Relevantes:</strong> ${formatReportCheckbox(data['podiatricHistory']) || 'Ninguno'}</p>
                            <p><strong>Tratamiento Médico Actual:</strong> ${data['currentTreatment'] || 'N/A'}</p>
                        </div>
                    </div>
                    
                    <div class="report-section">
                        <h3>Estilo de Vida y Hábitos</h3>
                        <div class="report-content">
                            <p><strong>Actividad física:</strong> ${data['physicalActivity'] || 'N/A'}</p>
                            <p><strong>Tipo de calzado:</strong> ${data['usualFootwear'] || 'N/A'}</p>
                            <p><strong>Frecuencia de caminata:</strong> ${data['dailyWalkFrequency'] || 'N/A'}</p>
                            <p><strong>Hábitos tóxicos:</strong> ${formatReportCheckbox(data['toxicologicalHabits']) || 'Ninguno'}</p>
                            <p><strong>Nivel de estrés:</strong> ${data['stressLevel'] || 'N/A'}</p>
                            <p><strong>Adherencia:</strong> ${data['treatmentAdherence'] || 'N/A'}</p>
                        </div>
                    </div>
                    
                    <div class="report-section">
                        <h3>Exploración Clínica Podológica</h3>
                        <div class="report-content">
                            <h4>Evaluación Podológica Específica:</h4>
                            <p><strong>Uñas:</strong> ${formatReportCheckbox(data['nailEvaluation']) || 'Sanas'}</p>
                            <p><strong>Piel y Tegumentos:</strong> ${formatReportCheckbox(data['skinEvaluation']) || 'Sana'}</p>
                            <p><strong>Marcha y Postura:</strong> ${data['gaitEvaluation'] || 'Normal'}</p>
                            <p><strong>Exploración Vascular (Pulsos):</strong> ${data['vascularPulses'] || 'N/A'}</p>
                            <p><strong>Llenado Capilar:</strong> ${data['capillaryRefill'] || 'N/A'}</p>
                            <p><strong>Temperatura del Pie:</strong> ${data['footTemperature'] || 'N/A'}</p>
                            <p><strong>Exploración Neurológica Básica:</strong> ${data['neurologicalEvaluation'] || 'N/A'}</p>
                            <p><strong>Lado(s) Afectado(s):</strong> ${data['affectedSide'] || 'N/A'}</p>
                            <p><strong>Observaciones Adicionales:</strong> ${data['clinicalObservations'] || 'Sin observaciones.'}</p>
                        </div>
                    </div>

                    <div class="report-section">
                        <h3>Plan de Tratamiento Sugerido</h3>
                        <div class="report-content">
                            <p><strong>Higiene del pie:</strong> ${data['hygieneIndications'] || 'N/A'}</p>
                            <p><strong>Corte y Cuidado de Uñas:</strong> ${data['nailCare'] || 'N/A'}</p>
                            <p><strong>Tratamientos Antimicóticos:</strong> ${data['antifungalTreatments'] || 'No aplica'}</p>
                            <p><strong>Órtesis Plantares / Calzado:</strong> ${data['orthoticsIndications'] || 'No aplica'}</p>
                            <p><strong>Seguimiento Podológico:</strong> ${data['podiatricFollowUp'] || 'N/A'}</p>
                        </div>
                    </div>

                    <div class="report-section">
                        <h3>Fotografía Clínica</h3>
                        <div class="report-image-container">
                            ${reportImagesHTML}
                        </div>
                        <div class="report-content" style="margin-top: 15px;">
                            <p><strong>Comentarios sobre las fotografías:</strong> ${data['imageObservations'] || 'N/A'}</p>
                        </div>
                    </div>

                    <div class="report-section">
                        <h3>Aceptación del Consentimiento</h3>
                        <div class="report-content">
                            <p><strong>Texto del Consentimiento:</strong></p>
                            <p style="white-space: pre-wrap; margin-top: 5px; border: 1px dashed var(--border-color); padding: 10px; border-radius: 5px; font-size: 0.9em;" class="consent-text-report">${data['consentText'] || 'No se ingresó texto del consentimiento.'}</p>
                            <p><strong>Aceptación:</strong> ${data['consent'] ? 'Aceptado' : 'No Aceptado'}</p>
                        </div>
                    </div>

                    <div class="report-signatures">
                        <div class="report-signature-box">
                            <img src="${patientSignaturePad.toDataURL()}" alt="Firma Paciente">
                            <p>Firma del Paciente</p>
                            <p>${patientNameForConsent}</p>
                        </div>
                        <div class="report-signature-box">
                            <img src="${professionalSignaturePad.toDataURL()}" alt="Firma Profesional">
                            <p>Firma del Especialista</p>
                            <p>${specialistNameForConsent}</p>
                        </div>
                    </div>
                `;
                reportContent.innerHTML = reportHtml;

                reportContainer.scrollIntoView({ behavior: 'smooth' });

          // --- 5. Generar PDF Multi-página con Márgenes Reales ---
html2canvas(reportContent, {
    scale: 2,
    useCORS: true,
    allowTaint: true,
    backgroundColor: "#ffffff"
}).then(canvas => {
    const imgData = canvas.toDataURL('image/png');
    const { jsPDF } = window.jspdf;
    const pdf = new jsPDF('p', 'mm', 'a4');

    // CONFIGURACIÓN DE MÁRGENES (en milímetros)
    const margin = 15; // Margen en todos los lados (arriba, abajo, izq, der)
    const pdfWidth = pdf.internal.pageSize.getWidth();
    const pdfHeight = pdf.internal.pageSize.getHeight();
    
    // Área útil donde se dibujará el contenido
    const contentWidth = pdfWidth - (2 * margin);
    const contentHeight = pdfHeight - (2 * margin);

    // Dimensiones de la imagen escalada al ancho útil
    const imgWidth = contentWidth;
    const imgHeight = (canvas.height * contentWidth) / canvas.width;

    let heightLeft = imgHeight;
    let position = 0; // Posición de recorte de la imagen original
    let pageNum = 1;

    // --- PAGINACIÓN CON MÁRGENES ---
    while (heightLeft > 0) {
        // En cada página, dibujamos solo una porción del canvas
        // Parámetros de addImage: img, formato, x, y, ancho, alto, alias, compresión, rotación
        // Usamos un contenedor visual para "recortar" la imagen
        pdf.addImage(
            imgData, 
            'PNG', 
            margin,             // Margen Izquierdo
            margin - position,  // Margen Superior - desplazamiento de recorte
            imgWidth, 
            imgHeight
        );

        heightLeft -= contentHeight;
        position += contentHeight; // Desplazamos para la siguiente sección

        if (heightLeft > 0) {
            // Añadir recuadro blanco para tapar cualquier desbordamiento en el margen inferior
            // (Opcional, pero asegura que el margen inferior esté siempre limpio)
            pdf.setFillColor(255, 255, 255);
            pdf.rect(0, pdfHeight - margin, pdfWidth, margin, 'F'); // Tapa abajo
            pdf.rect(0, 0, pdfWidth, margin, 'F'); // Tapa arriba
            
            pdf.addPage();
            pageNum++;
        }
    }

    // --- Interfaz de Usuario ---
    const pdfBlobUrl = pdf.output('bloburl');
    reportContainer.innerHTML = '';
    const iframe = document.createElement('iframe');
    iframe.src = pdfBlobUrl;
    iframe.style.width = '100%';
    iframe.style.height = '600px';
    iframe.style.border = 'none';
    reportContainer.appendChild(iframe);

    const downloadLink = document.createElement('a');
    downloadLink.href = pdfBlobUrl;
    downloadLink.download = 'Reporte_Podologia.pdf';
    downloadLink.textContent = 'Descargar PDF';
    downloadLink.style.cssText = `
        display: block; text-align: center; margin: 20px auto; padding: 12px;
        background: var(--accent-pink); color: white; border-radius: 25px;
        text-decoration: none; font-weight: bold; max-width: 300px;
    `;
    reportContainer.appendChild(downloadLink);

}).catch(error => {
    console.error('Error:', error);
});
            };
        });
    </script>
</body>
</html>